#### Source ####

# Postgres
PGSTREAM_POSTGRES_LISTENER_URL="postgresql://user:password@localhost:5432/mydatabase"
PGSTREAM_POSTGRES_REPLICATION_SLOT_NAME="pgstream_mydatabase_slot"
PGSTREAM_POSTGRES_SNAPSHOT_STORE_URL="postgresql://user:password@localhost:5432/mytargetdatabase"
PGSTREAM_POSTGRES_SNAPSHOT_STORE_REPEATABLE=true
PGSTREAM_POSTGRES_SNAPSHOT_TABLES="test test_schema.Test another_schema.*"
PGSTREAM_POSTGRES_SNAPSHOT_EXCLUDED_TABLES="test_schema.Test"
PGSTREAM_POSTGRES_SNAPSHOT_WORKERS=4
PGSTREAM_POSTGRES_SNAPSHOT_SCHEMA_WORKERS=4
PGSTREAM_POSTGRES_SNAPSHOT_TABLE_WORKERS=4
PGSTREAM_POSTGRES_SNAPSHOT_BATCH_BYTES=83886080 # 80MiB
PGSTREAM_POSTGRES_SNAPSHOT_CLEAN_TARGET_DB=true
PGSTREAM_POSTGRES_SNAPSHOT_CREATE_TARGET_DB=true
PGSTREAM_POSTGRES_SNAPSHOT_INCLUDE_GLOBAL_DB_OBJECTS=true
PGSTREAM_POSTGRES_SNAPSHOT_ROLE="test-role"
PGSTREAM_POSTGRES_SNAPSHOT_ROLES_SNAPSHOT_MODE="disabled"
PGSTREAM_POSTGRES_SNAPSHOT_SCHEMA_DUMP_FILE="pg_dump.sql"

# Kafka
PGSTREAM_KAFKA_READER_SERVERS="localhost:9092"
PGSTREAM_KAFKA_TOPIC_NAME="mytopic"
PGSTREAM_KAFKA_READER_CONSUMER_GROUP_ID="mygroup"
PGSTREAM_KAFKA_READER_CONSUMER_GROUP_START_OFFSET="earliest"
PGSTREAM_KAFKA_COMMIT_EXP_BACKOFF_INITIAL_INTERVAL="1s"
PGSTREAM_KAFKA_COMMIT_EXP_BACKOFF_MAX_INTERVAL="1m"
PGSTREAM_KAFKA_COMMIT_EXP_BACKOFF_MAX_RETRIES=5
PGSTREAM_KAFKA_TLS_ENABLED=true
PGSTREAM_KAFKA_TLS_CA_CERT_FILE="/path/to/ca.crt"
PGSTREAM_KAFKA_TLS_CLIENT_CERT_FILE="/path/to/client.crt"
PGSTREAM_KAFKA_TLS_CLIENT_KEY_FILE="/path/to/client.key"


#### Target ####

# Postgres
PGSTREAM_POSTGRES_WRITER_TARGET_URL="postgresql://user:password@localhost:5432/mytargetdatabase"
PGSTREAM_POSTGRES_WRITER_BATCH_SIZE=100
PGSTREAM_POSTGRES_WRITER_BATCH_TIMEOUT="1s"
PGSTREAM_POSTGRES_WRITER_MAX_QUEUE_BYTES=204800
PGSTREAM_POSTGRES_WRITER_BATCH_BYTES=1572864
PGSTREAM_POSTGRES_WRITER_SCHEMALOG_STORE_URL="postgresql://user:password@localhost:5432/mydatabase"
PGSTREAM_POSTGRES_WRITER_DISABLE_TRIGGERS=false
PGSTREAM_POSTGRES_WRITER_ON_CONFLICT_ACTION="nothing"
PGSTREAM_POSTGRES_WRITER_BULK_INGEST_ENABLED=true

# Kafka
PGSTREAM_KAFKA_WRITER_SERVERS="localhost:9092"
PGSTREAM_KAFKA_TOPIC_NAME="mytopic"
PGSTREAM_KAFKA_TOPIC_PARTITIONS=1
PGSTREAM_KAFKA_TOPIC_REPLICATION_FACTOR=1
PGSTREAM_KAFKA_TOPIC_AUTO_CREATE=true
PGSTREAM_KAFKA_WRITER_BATCH_TIMEOUT="1s"
PGSTREAM_KAFKA_WRITER_BATCH_SIZE=100
PGSTREAM_KAFKA_WRITER_BATCH_BYTES=1572864
PGSTREAM_KAFKA_WRITER_MAX_QUEUE_BYTES=204800
PGSTREAM_KAFKA_TLS_ENABLED=true
PGSTREAM_KAFKA_TLS_CA_CERT_FILE="/path/to/ca.crt"
PGSTREAM_KAFKA_TLS_CLIENT_CERT_FILE="/path/to/client.crt"
PGSTREAM_KAFKA_TLS_CLIENT_KEY_FILE="/path/to/client.key"


# Search
PGSTREAM_SEARCH_INDEXER_BATCH_SIZE=100
PGSTREAM_SEARCH_INDEXER_BATCH_TIMEOUT="1s"
PGSTREAM_SEARCH_INDEXER_MAX_QUEUE_BYTES=204800
PGSTREAM_SEARCH_INDEXER_BATCH_BYTES=1572864
PGSTREAM_ELASTICSEARCH_STORE_URL="http://localhost:9200"
PGSTREAM_SEARCH_STORE_EXP_BACKOFF_INITIAL_INTERVAL="1s"
PGSTREAM_SEARCH_STORE_EXP_BACKOFF_MAX_INTERVAL="1m"
PGSTREAM_SEARCH_STORE_EXP_BACKOFF_MAX_RETRIES=5

# Webhooks
PGSTREAM_WEBHOOK_SUBSCRIPTION_STORE_URL="postgresql://user:password@localhost:5432/mydatabase"
PGSTREAM_WEBHOOK_SUBSCRIPTION_STORE_CACHE_ENABLED=true
PGSTREAM_WEBHOOK_SUBSCRIPTION_STORE_CACHE_REFRESH_INTERVAL="60s"
PGSTREAM_WEBHOOK_SUBSCRIPTION_SERVER_ADDRESS="localhost:9090"
PGSTREAM_WEBHOOK_SUBSCRIPTION_SERVER_READ_TIMEOUT="60s"
PGSTREAM_WEBHOOK_SUBSCRIPTION_SERVER_WRITE_TIMEOUT="60s"
PGSTREAM_WEBHOOK_NOTIFIER_WORKER_COUNT=4
PGSTREAM_WEBHOOK_NOTIFIER_CLIENT_TIMEOUT="1s"

#### Modifiers ####

# Injector
PGSTREAM_INJECTOR_STORE_POSTGRES_URL="postgresql://user:password@localhost:5432/mydatabase"

# Filter
PGSTREAM_FILTER_INCLUDE_TABLES="test test_schema.test another_schema.*"
PGSTREAM_FILTER_EXCLUDE_TABLES="excluded_test excluded_schema.test another_excluded_schema.*"

# Transformers
PGSTREAM_TRANSFORMER_RULES_FILE="test/test_transformer_rules.yaml"


#### Instrumentation ####
PGSTREAM_METRICS_ENDPOINT="http://localhost:4317"
PGSTREAM_METRICS_COLLECTION_INTERVAL=60s
PGSTREAM_TRACES_ENDPOINT="http://localhost:4317"
PGSTREAM_TRACES_SAMPLE_RATIO=0.5
